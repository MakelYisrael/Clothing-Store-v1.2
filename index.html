<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Clothing Store</title>
</head>
<body>
    <nav class="main-nav">
        <div class="nav-right">
            <button id="logoutBtn" style="display:none;">Logout</button>
            <button id="signupNavBtn">Sign Up</button>
        </div>
    </nav>

    <div id="loginPage">
        <!-- Existing login content -->
        <button id="signUpBtn">Sign Up</button>
    </div>

    <div class="signup" id="signupPage" style="display:none;">
        <h2>Create Your Account</h2>
        <form id="signupForm">
            <input type="text" id="signupUsername" placeholder="Create Username" required /><br /><br />
            <input type="password" id="signupPassword" placeholder="Create Password" required /><br /><br />
            <input type="password" id="signupConfirmPassword" placeholder="Confirm Password" required /><br /><br />
            <input type="email" id="signupEmail" placeholder="Email Address" required /><br /><br />
            <input type="text" id="signupPhone" placeholder="Phone Number (optional)" /><br /><br />
            <button type="submit">Sign Up</button>
            <button type="button" id="backToLoginBtn">Back to Login</button>
        </form>
    </div>

    <script>
        // Show signup page when Sign Up is clicked
        const signUpBtn = document.getElementById('signUpBtn');
        const signupNavBtn = document.getElementById('signupNavBtn');
        const loginPage = document.getElementById('loginPage');
        const signupPage = document.getElementById('signupPage');
        const backToLoginBtn = document.getElementById('backToLoginBtn');

        if (signUpBtn) {
          signUpBtn.onclick = () => {
            loginPage.style.display = 'none';
            signupPage.style.display = 'block';
          };
        }
        if (signupNavBtn) {
          signupNavBtn.onclick = () => {
            loginPage.style.display = 'none';
            signupPage.style.display = 'block';
          };
        }
        if (backToLoginBtn) {
          backToLoginBtn.onclick = () => {
            signupPage.style.display = 'none';
            loginPage.style.display = 'block';
          };
        }

        // Signup form submission
        const signupForm = document.getElementById('signupForm');
        signupForm.onsubmit = async (e) => {
          e.preventDefault();
          const username = document.getElementById('signupUsername').value;
          const password = document.getElementById('signupPassword').value;
          const confirmPassword = document.getElementById('signupConfirmPassword').value;
          const email = document.getElementById('signupEmail').value;
          const phone = document.getElementById('signupPhone').value;

          if (password !== confirmPassword) {
            alert('Passwords do not match!');
            return;
          }

          // POST to Firestorm API
          try {
            const response = await fetch('/api/signup', {
              method: 'POST',
              headers: {
                'Content-Type': 'application/json',
              },
              body: JSON.stringify({
                username,
                password,
                email,
                phone,
              }),
            });
            if (response.ok) {
              alert('Signup successful!');
              signupPage.style.display = 'none';
              loginPage.style.display = 'block';
            } else {
              const error = await response.text();
              alert('Signup failed: ' + error);
            }
          } catch (err) {
            alert('Network error: ' + err.message);
          }
        };
    </script>
</body>
</html>